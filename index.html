<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mahishadal Sadar Youth Computer Training Centre | Typing Test</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link ref="icon" type="image" href="logo.png">
  <style>
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
    }
    body {
      background: linear-gradient(to bottom, #d9f0ff, #ffffff);
      font-family: 'Segoe UI', sans-serif;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      padding-bottom: 60px;
    }
    header {
      background: linear-gradient(to right, #3b82f6, #1e3a8a);
      color: white;
      padding: 15px 20px;
      position: sticky;
      top: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
      z-index: 1000;
    }
    header img {
      height: 90px;
      width: 90px;
      border-radius: 50%;
      margin-right: 20px;
    }
    .test-area {
      max-width: 900px;
      margin: 40px auto;
      text-align: center;
      padding:30px;
      flex-grow: 1;
    }
    textarea {
      width: 100%;
      height: 180px;
      padding: 10px;
      border-radius: 10px;
      border: 1px solid #ccc;
      resize: none;
    }
    #timer {
      font-size: 18px;
      font-weight: bold;
      margin-top: 10px;
      transition: color 0.3s ease;
    }
    .result-panel {
      display: none;
      animation: fadeIn 1s ease forwards;
    }
    @keyframes fadeIn {
      from {opacity: 0; transform: translateY(30px);} 
      to {opacity: 1; transform: translateY(0);} 
    }
    footer {
      background: linear-gradient(to right, #3b82f6, #1e3a8a);
      color: white;
      text-align: center;
      padding: 10px 0;
      position: sticky;
      bottom: 0;
      width: 100%;
      font-size: 14px;
    }
    /* Popup */
    #namePopup {
      display: flex;
      justify-content: center;
      align-items: center;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.4);
      z-index: 2000;
      animation: fadeInPopup 0.5s ease;
    }
    @keyframes fadeInPopup {
      from {opacity: 0;} to {opacity: 1;}
    }
    .popup-content {
      background: linear-gradient(to bottom, #b3e0ff, #e6f5ff);
      border-radius: 12px;
      padding: 30px;
      text-align: center;
      width: 350px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    }
    .text-justify {
      text-align: justify;
      text-justify: inter-word; /* improves word spacing in some browsers */
    }
  </style>
</head>
<body>
  <div id="namePopup">
    <div class="popup-content">
      <img src="logo.png" alt="Institute Logo" height="200" class="pb-3">
      <input type="text" id="studentName" class="form-control mb-3" placeholder="Enter your name">
      <button class="btn btn-primary w-100" onclick="startTest()">Start Test</button>
    </div>
  </div>

  <header>
    <img src="logo.png" alt="Institute Logo">
    <div class="text-center">
      <h4 class="mb-0">Mahishadal Sadar Youth Computer Training Centre</h4>
      <p class="mb-0 small">Cinema More :: Mahishadal :: Purba Medinipur :: 721628</p>
    </div>
  </header>

  <div class="test-area" id="testArea">
    <p><strong>Typing Paragraph:</strong></p>
    <p id="textParagraph" class="text-justify lead bold">
      The new bill being prepared on the lines of United Kingdom Traffic Management Act may also push for over Rs 2,000 fines for common offences such as red light jumping, not wearing seatbelt and helmet, and higher penalties for speeding, driving under influence of alcohol.I use CTRL^C 90% of the time (and CTRL^X the other 10%). I am your #1 fan!!
    </p>

    <div id="timer">Time Left: 10:00</div>

    <textarea id="userInput" placeholder="Start typing here..." disabled></textarea>
    
    <div class="mt-3">
      <button id="startBtn" class="btn btn-success me-2">Start</button>
      <button id="stopBtn" class="btn btn-danger" style="display:none;">Stop</button>
    </div>
  </div>

  <div class="container result-panel text-center mt-5" id="resultPanel">
    <div class="card shadow-lg">
      <div class="card-header text-white" style="background: linear-gradient(to right, #aa4bff, #aa41fc);">
        <h4 class="mb-0">Typing Test Result</h4>
      </div>
      <div class="card-body">
        <h5 id="resultName" class="mb-3"></h5>
        <p>Correct Entries: <span id="correctEntries">00</span> word(s)</p>
        <p>Incorrect Entries: <span id="incorrectEntries">00</span> word(s)</p>
        <p>Total Entries: <span id="totalEntries">00</span> word(s)</p>
        <p>Error Rate: <span id="errorRate">0.00</span>%</p>
        <p>Accuracy: <span id="accuracy">00.00</span>%</p>
        <p>Gross Speed: <span id="grossSpeed">00.00</span> wpm</p>
        <p>Total Time: <span id="totalTime">00</span> min(s)</p>
        <button class="btn btn-primary me-2" onclick="shareOnFacebook()">Share on Facebook</button>
        <button class="btn btn-secondary" hidden onclick="retakeTest()">Retake Test</button>
      </div>
    </div>
  </div>

  <footer>
    © 2025 Mahishadal Sadar Youth Computer Training Centre | All Rights Reserved
  </footer>

 <script>
  let timerInterval;
  let timeLeft = 600; // 10 minutes
  let student = '';
  let started = false;
  let firstLoad = true; // track if it's the first time

  const startBtn = document.getElementById('startBtn');
  const stopBtn = document.getElementById('stopBtn');
  const typingArea = document.getElementById('userInput');
  const testPanel = document.getElementById('testArea');
  const resultPanel = document.getElementById('resultPanel');
  const resultName = document.getElementById('resultName');
  const namePopup = document.getElementById('namePopup');
  const userNameInput = document.getElementById('studentName');
  const timerDisplay = document.getElementById('timer');
  const referenceText = document.getElementById('textParagraph').textContent.trim();

  // Disable paste
  typingArea.addEventListener('paste', e => e.preventDefault());

  // Show popup only first time
  window.onload = function() {
    if (!firstLoad && student) {
      namePopup.style.display = 'none';
    }
  };

  function startTest() {
    student = userNameInput.value.trim();
    if (student === '') {
      alert('Please enter your name before starting the test.');
      return;
    }
    firstLoad = false;
    namePopup.style.display = 'none';
    typingArea.disabled = true;
    startBtn.style.display = 'inline-block';
  }

  startBtn.addEventListener('click', () => {
    if (started) return;
    started = true;
    typingArea.disabled = false;
    typingArea.focus();
    startBtn.style.display = 'none';
    stopBtn.style.display = 'inline-block';
    updateTimer();

    timerInterval = setInterval(() => {
      if (timeLeft <= 0) {
        clearInterval(timerInterval);
        showResults();
      } else {
        timeLeft--;
        updateTimer();
      }
    }, 1000);
  });

  stopBtn.addEventListener('click', () => {
    clearInterval(timerInterval);
    showResults();
  });

  function updateTimer() {
    const minutes = Math.floor(timeLeft / 60);
    const seconds = timeLeft % 60;
    timerDisplay.textContent = `Time Left: ${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;

    if (timeLeft > 300) timerDisplay.style.color = '#0b8a1e';
    else if (timeLeft > 120) timerDisplay.style.color = '#ff9800';
    else timerDisplay.style.color = '#ff0000';
  }

  function showResults() {
    testPanel.style.display = 'none';
    resultPanel.style.display = 'block';
    resultName.textContent = `Student Name: ${student || 'Student'}`;

    const typedText = typingArea.value.trim();
    const refWords = referenceText.split(/\s+/);
    const typedWords = typedText.split(/\s+/);
    let correct = 0;

    for (let i = 0; i < typedWords.length; i++) {
      if (typedWords[i] === refWords[i]) correct++;
    }

    const total = typedWords.length;
    const incorrect = total - correct;
    const accuracy = ((correct / total) * 100).toFixed(2);
    const timeUsed = (600 - timeLeft) / 60;
    const grossSpeed = (correct / timeUsed).toFixed(2);

    document.getElementById('correctEntries').textContent = correct;
    document.getElementById('incorrectEntries').textContent = incorrect;
    document.getElementById('totalEntries').textContent = total;
    document.getElementById('errorRate').textContent = ((incorrect / total) * 100).toFixed(2);
    document.getElementById('accuracy').textContent = isNaN(accuracy) ? '0.00' : accuracy;
    document.getElementById('grossSpeed').textContent = isFinite(grossSpeed) ? grossSpeed : '0.00';
    document.getElementById('totalTime').textContent = timeUsed.toFixed(2);
  }

  // ✅ Retake test without showing popup again
  function retakeTest() {
    clearInterval(timerInterval);
    timeLeft = 600;
    started = false;
    typingArea.value = '';
    resultPanel.style.display = 'none';
    testPanel.style.display = 'block';
    startBtn.style.display = 'inline-block';
    stopBtn.style.display = 'none';
    typingArea.disabled = true;
    updateTimer();
  }

  function shareOnFacebook() {
    const url = encodeURIComponent(window.location.href);
    const text = encodeURIComponent('Typing test result from Mahishadal Sadar Youth Computer Training Centre!');
    window.open(`https://www.facebook.com/sharer/sharer.php?u=${url}&quote=${text}`, '_blank');
  }
</script>

</body>
</html>



